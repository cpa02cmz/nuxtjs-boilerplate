@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Variables - Flexy hates hardcoded values! */
:root {
  /* Focus styles */
  --focus-outline-width: 2px;
  --focus-outline-style: solid;
  --focus-outline-color: #1f2937;
  --focus-outline-offset: 2px;
  --focus-hc-outline-width: 3px;
  --focus-hc-outline-color: #000000;

  /* Accessibility */
  --skip-link-padding: 8px;
  --sr-only-width: 1px;
  --sr-only-height: 1px;
  --sr-only-margin: -1px;

  /* Transitions */
  --transition-page-enter-duration: 0.2s;
  --transition-page-leave-duration: 0.2s;
  --transition-layout-duration: 0.2s;
  --transition-reduced-motion-duration: 0.1s;
  --transition-easing: ease;

  /* Transforms */
  --transform-page-enter-y: 8px;
  --transform-page-leave-y: -8px;

  /* Ripple */
  --ripple-duration: 600ms;
  --ripple-easing: cubic-bezier(0.4, 0, 0.2, 1);

  /* High Contrast */
  --hc-background: #ffffff;
  --hc-text: #000000;
  --hc-link: #0000ee;
  --hc-link-hover: #0000ee;
  --hc-border-width: 2px;
  --hc-border-color: #000000;

  /* Reduced Motion */
  --reduced-motion-animation-duration: 0.01ms;
  --reduced-motion-transition-duration: 0.01ms;
}

/* Custom styles can be added here */

/* Dark mode support - applies to entire document */
html.dark {
  color-scheme: dark;
}

body {
  font-family:
    Inter,
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    Roboto,
    Oxygen,
    Ubuntu,
    Cantarell,
    'Open Sans',
    'Helvetica Neue',
    sans-serif;
}

/* Improved focus styles for keyboard navigation - Using CSS Variables */
body.keyboard-nav :focus {
  outline: var(--focus-outline-width) var(--focus-outline-style)
    var(--focus-outline-color) !important;
  outline-offset: var(--focus-outline-offset);
}

/* Hide focus indicators when using mouse navigation */
body.mouse-nav :focus {
  outline: none;
}

/* Ensure skip link is always visible when focused - Using CSS Variables */
.sr-only.focus:not(.sr-only) {
  position: absolute !important;
  width: auto !important;
  height: auto !important;
  padding: var(--skip-link-padding) !important;
  margin: 0 !important;
  overflow: visible !important;
  clip-path: none !important;
  white-space: nowrap !important;
}

/* Reduced motion support for users who prefer it - Using CSS Variables */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: var(--reduced-motion-animation-duration) !important;
    animation-iteration-count: 1 !important;
    transition-duration: var(--reduced-motion-transition-duration) !important;
    scroll-behavior: auto !important;
  }
}

/* Screen reader only content - Using CSS Variables */
.sr-only {
  position: absolute;
  width: var(--sr-only-width);
  height: var(--sr-only-height);
  padding: 0;
  margin: var(--sr-only-margin);
  overflow: hidden;
  clip-path: inset(50%);
  white-space: nowrap;
  border-width: 0;
}

/* Page Transition Animations */
/* Smooth fade and slide effect when navigating between pages - Using CSS Variables */
.page-enter-active,
.page-leave-active {
  transition:
    opacity var(--transition-page-enter-duration) var(--transition-easing),
    transform var(--transition-page-enter-duration) var(--transition-easing);
}

.page-enter-from {
  opacity: 0;
  transform: translateY(var(--transform-page-enter-y));
}

.page-leave-to {
  opacity: 0;
  transform: translateY(var(--transform-page-leave-y));
}

/* Layout transitions - Using CSS Variables */
.layout-enter-active,
.layout-leave-active {
  transition: opacity var(--transition-layout-duration) var(--transition-easing);
}

.layout-enter-from,
.layout-leave-to {
  opacity: 0;
}

/* Reduced motion support for page transitions - Using CSS Variables */
@media (prefers-reduced-motion: reduce) {
  .page-enter-active,
  .page-leave-active {
    transition: opacity var(--transition-reduced-motion-duration)
      var(--transition-easing);
  }

  .page-enter-from,
  .page-leave-to {
    transform: none;
  }

  .layout-enter-active,
  .layout-leave-active {
    transition: opacity var(--transition-reduced-motion-duration)
      var(--transition-easing);
  }
}

/* High contrast mode support - Using CSS Variables */
@media (prefers-contrast: high) {
  body {
    background-color: var(--hc-background) !important;
    color: var(--hc-text) !important;
  }

  .bg-white {
    background-color: var(--hc-background) !important;
  }
  .bg-gray-50 {
    background-color: var(--hc-background) !important;
  }
  .bg-gray-100 {
    background-color: var(--hc-background) !important;
  }
  .text-gray-900 {
    color: var(--hc-text) !important;
  }
  .text-gray-800 {
    color: var(--hc-text) !important;
  }
  .text-gray-700 {
    color: var(--hc-text) !important;
  }
  .text-gray-600 {
    color: var(--hc-text) !important;
  }
  .border-gray-300 {
    border-color: var(--hc-border-color) !important;
  }

  /* Ensure sufficient contrast for interactive elements */
  a,
  button {
    color: var(--hc-link) !important;
    text-decoration: underline !important;
  }

  a:hover,
  button:hover {
    color: var(--hc-link-hover) !important;
  }

  /* Improve contrast for resource cards in high contrast mode */
  .bg-white.p-6.rounded-lg.shadow {
    border: var(--hc-border-width) solid var(--hc-border-color) !important;
  }

  /* Ensure focus indicators are visible in high contrast */
  body.keyboard-nav :focus {
    outline: var(--focus-hc-outline-width) solid var(--focus-hc-outline-color) !important;
    outline-offset: var(--focus-outline-offset);
  }
}

/* ============================================
   Ripple Effect Animation - Palette's UX Touch
   Material Design style ripple for button feedback
   ============================================ */

@keyframes ripple-animation {
  0% {
    transform: scale(0);
    opacity: 0.8;
  }
  50% {
    opacity: 0.4;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

/* Ripple effect base styles */
.ripple-effect {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  transform: scale(0);
  animation: ripple-animation var(--ripple-duration) var(--ripple-easing)
    forwards;
}

/* Ensure buttons with ripples have proper positioning */
button:has(.ripple-effect) {
  position: relative;
  overflow: hidden;
}

/* Reduced motion support for ripple effect */
@media (prefers-reduced-motion: reduce) {
  .ripple-effect {
    animation: none !important;
    display: none !important;
  }
}

/* ============================================
   Floating Label Styles - Palette's micro-UX delight!
   Smooth animated labels that float above inputs
   ============================================ */

/* Container for floating label and input */
.floating-label-container {
  position: relative;
  margin-top: 0.5rem;
}

/* The floating label itself */
.floating-label {
  position: absolute;
  left: 1rem;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.875rem;
  color: rgb(107, 114, 128);
  pointer-events: none;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  background-color: transparent;
  padding: 0 0.25rem;
  z-index: 1;
  transform-origin: left center;
}

/* Floating state - when input is focused or has value */
.floating-label-container:focus-within .floating-label,
.floating-label-container.has-value .floating-label {
  top: 0;
  transform: translateY(-50%) scale(0.85);
  color: rgb(59, 130, 246);
  background-color: white;
}

/* Error state */
.floating-label-container.has-error .floating-label {
  color: rgb(239, 68, 68);
}

/* Success state */
.floating-label-container.has-success .floating-label {
  color: rgb(34, 197, 94);
}

/* Input with floating label needs extra top padding */
.floating-label-container input,
.floating-label-container textarea {
  padding-top: 1.25rem;
  padding-bottom: 0.5rem;
}

/* Reduced motion support for floating labels */
@media (prefers-reduced-motion: reduce) {
  .floating-label {
    transition: none;
  }
}

/* ============================================
   Typing Indicator Animation - Palette's micro-UX delight! ✨
   Animated bouncing dots that indicate active typing
   ============================================ */

@keyframes typing-bounce {
  0%,
  60%,
  100% {
    transform: translateY(0);
    opacity: 0.4;
  }
  30% {
    transform: translateY(-4px);
    opacity: 1;
  }
}

.animate-typing-bounce {
  animation: typing-bounce 600ms ease-in-out infinite;
}

/* Reduced motion support for typing indicator */
@media (prefers-reduced-motion: reduce) {
  .animate-typing-bounce {
    animation: none !important;
    opacity: 0.6 !important;
  }
}

/* Input focus glow effect - Palette's micro-UX enhancement! */
.input-focus-glow:focus {
  box-shadow:
    0 0 0 3px rgba(59, 130, 246, 0.1),
    0 0 0 1px rgba(59, 130, 246, 0.3);
}

/* ============================================
   Focus Spotlight - Palette's micro-UX delight! ✨
   Animated focus indicator for keyboard navigation
   ============================================ */

/* Enhanced keyboard focus styles with animated spotlight effect */
body.keyboard-nav :focus-visible {
  outline: none;
  position: relative;
  z-index: 100;
}

/* Animated focus spotlight ring */
body.keyboard-nav :focus-visible::before {
  content: '';
  position: absolute;
  inset: -4px;
  border-radius: inherit;
  padding: 2px;
  background: linear-gradient(
    135deg,
    rgba(59, 130, 246, 0.8) 0%,
    rgba(99, 102, 241, 0.8) 50%,
    rgba(139, 92, 246, 0.8) 100%
  );
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: focus-spotlight-pulse 2s ease-in-out infinite;
  pointer-events: none;
  z-index: 9999;
}

/* Secondary glow layer for depth */
body.keyboard-nav :focus-visible::after {
  content: '';
  position: absolute;
  inset: -6px;
  border-radius: inherit;
  background: transparent;
  box-shadow:
    0 0 0 2px rgba(59, 130, 246, 0.2),
    0 0 20px 4px rgba(59, 130, 246, 0.15),
    0 0 40px 8px rgba(99, 102, 241, 0.1);
  animation: focus-glow-pulse 2s ease-in-out infinite;
  pointer-events: none;
  z-index: 9998;
}

/* Keyframes for the spotlight animation */
@keyframes focus-spotlight-pulse {
  0%,
  100% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.02);
  }
}

@keyframes focus-glow-pulse {
  0%,
  100% {
    opacity: 0.4;
    box-shadow:
      0 0 0 2px rgba(59, 130, 246, 0.15),
      0 0 15px 2px rgba(59, 130, 246, 0.1),
      0 0 30px 4px rgba(99, 102, 241, 0.05);
  }
  50% {
    opacity: 0.8;
    box-shadow:
      0 0 0 2px rgba(59, 130, 246, 0.3),
      0 0 25px 4px rgba(59, 130, 246, 0.2),
      0 0 50px 8px rgba(99, 102, 241, 0.15);
  }
}

/* Special handling for circular elements (buttons, avatars) */
body.keyboard-nav button:focus-visible::before,
body.keyboard-nav [role='button']:focus-visible::before {
  border-radius: 50%;
}

/* Special handling for rounded elements */
body.keyboard-nav input:focus-visible::before,
body.keyboard-nav textarea:focus-visible::before {
  border-radius: 8px;
}

/* High contrast mode support for focus spotlight */
@media (prefers-contrast: high) {
  body.keyboard-nav :focus-visible::before {
    background: none;
    border: 3px solid currentColor;
    animation: none;
  }

  body.keyboard-nav :focus-visible::after {
    display: none;
  }
}

/* Reduced motion support - disable animations but keep visibility */
@media (prefers-reduced-motion: reduce) {
  body.keyboard-nav :focus-visible::before {
    animation: none;
    opacity: 0.9;
  }

  body.keyboard-nav :focus-visible::after {
    animation: none;
    opacity: 0.6;
    box-shadow:
      0 0 0 2px rgba(59, 130, 246, 0.25),
      0 0 10px 2px rgba(59, 130, 246, 0.15);
  }
}

/* Form shake animation for validation errors */
@keyframes form-shake {
  0%,
  100% {
    transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-4px);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(4px);
  }
}

.animate-form-shake {
  animation: form-shake 0.5s ease-in-out;
}

/* Reduced motion support for form shake */
@media (prefers-reduced-motion: reduce) {
  .animate-form-shake {
    animation: none !important;
    border-color: rgb(239, 68, 68) !important;
  }
}
